<!DOCTYPE html>
<html lang="en"><head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="twitter:card" content="summary" /><!-- Begin Jekyll SEO tag v2.6.1 -->
<title>A quick note on regular expressions | Joe Dockrill</title>
<meta name="generator" content="Jekyll v4.0.0" />
<meta property="og:title" content="A quick note on regular expressions" />
<meta name="author" content="Joe Dockrill" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="Why regular expressions are awesome and you should learn them." />
<meta property="og:description" content="Why regular expressions are awesome and you should learn them." />
<link rel="canonical" href="https://joedockrill.github.io/blog/2020/06/01/a-quick-note-on-regular-expressions/" />
<meta property="og:url" content="https://joedockrill.github.io/blog/2020/06/01/a-quick-note-on-regular-expressions/" />
<meta property="og:site_name" content="Joe Dockrill" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2020-06-01T00:00:00-05:00" />
<script type="application/ld+json">
{"author":{"@type":"Person","name":"Joe Dockrill"},"description":"Why regular expressions are awesome and you should learn them.","@type":"BlogPosting","headline":"A quick note on regular expressions","url":"https://joedockrill.github.io/blog/2020/06/01/a-quick-note-on-regular-expressions/","datePublished":"2020-06-01T00:00:00-05:00","dateModified":"2020-06-01T00:00:00-05:00","mainEntityOfPage":{"@type":"WebPage","@id":"https://joedockrill.github.io/blog/2020/06/01/a-quick-note-on-regular-expressions/"},"@context":"https://schema.org"}</script>
<!-- End Jekyll SEO tag -->
<link rel="stylesheet" href="/blog/assets/css/style.css"><link type="application/atom+xml" rel="alternate" href="https://joedockrill.github.io/blog/feed.xml" title="Joe Dockrill" /><!-- the google_analytics_id gets auto inserted from the config file -->



<script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','//www.google-analytics.com/analytics.js','ga');ga('create','UA-175488888-1','auto');ga('require','displayfeatures');ga('send','pageview');</script>

<link rel="shortcut icon" type="image/x-icon" href="/blog/images/favicon.ico"><!-- Begin Jekyll SEO tag v2.6.1 -->
<title>A quick note on regular expressions | Joe Dockrill</title>
<meta name="generator" content="Jekyll v4.0.0" />
<meta property="og:title" content="A quick note on regular expressions" />
<meta name="author" content="Joe Dockrill" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="Why regular expressions are awesome and you should learn them." />
<meta property="og:description" content="Why regular expressions are awesome and you should learn them." />
<link rel="canonical" href="https://joedockrill.github.io/blog/2020/06/01/a-quick-note-on-regular-expressions/" />
<meta property="og:url" content="https://joedockrill.github.io/blog/2020/06/01/a-quick-note-on-regular-expressions/" />
<meta property="og:site_name" content="Joe Dockrill" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2020-06-01T00:00:00-05:00" />
<script type="application/ld+json">
{"author":{"@type":"Person","name":"Joe Dockrill"},"description":"Why regular expressions are awesome and you should learn them.","@type":"BlogPosting","headline":"A quick note on regular expressions","url":"https://joedockrill.github.io/blog/2020/06/01/a-quick-note-on-regular-expressions/","datePublished":"2020-06-01T00:00:00-05:00","dateModified":"2020-06-01T00:00:00-05:00","mainEntityOfPage":{"@type":"WebPage","@id":"https://joedockrill.github.io/blog/2020/06/01/a-quick-note-on-regular-expressions/"},"@context":"https://schema.org"}</script>
<!-- End Jekyll SEO tag -->

<link href="https://unpkg.com/@primer/css/dist/primer.css" rel="stylesheet" />
<link rel="stylesheet" href="//use.fontawesome.com/releases/v5.0.7/css/all.css"><link type="application/atom+xml" rel="alternate" href="https://joedockrill.github.io/blog/feed.xml" title="Joe Dockrill" /><!-- the google_analytics_id gets auto inserted from the config file -->



<script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','//www.google-analytics.com/analytics.js','ga');ga('create','UA-175488888-1','auto');ga('require','displayfeatures');ga('send','pageview');</script>



<script>
function wrap_img(fn) {
    if (document.attachEvent ? document.readyState === "complete" : document.readyState !== "loading") {
        var elements = document.querySelectorAll(".post img");
        Array.prototype.forEach.call(elements, function(el, i) {
            if (el.getAttribute("title") && (el.className != "emoji")) {
                const caption = document.createElement('figcaption');
                var node = document.createTextNode(el.getAttribute("title"));
                caption.appendChild(node);
                const wrapper = document.createElement('figure');
                wrapper.className = 'image';
                el.parentNode.insertBefore(wrapper, el);
                el.parentNode.removeChild(el);
                wrapper.appendChild(el);
                wrapper.appendChild(caption);
            }
        });
    } else { document.addEventListener('DOMContentLoaded', fn); }
}
window.onload = wrap_img;
</script>

<script>
    document.addEventListener("DOMContentLoaded", function(){
    // add link icon to anchor tags
    var elem = document.querySelectorAll(".anchor-link")
    elem.forEach(e => (e.innerHTML = '<i class="fas fa-link fa-xs"></i>'));
    });
</script>
</head>
<body>
    <img src="/blog/images/web-header-wide.png"><header class="site-header" style="background-color: #92A2BA; font-weight: bold;">

  <div class="wrapper"><a class="site-title" rel="author" href="/blog/">Home</a><nav class="site-nav">
        <input type="checkbox" id="nav-trigger" class="nav-trigger" />
        <label for="nav-trigger">
          <span class="menu-icon">
            <svg viewBox="0 0 18 15" width="18px" height="15px">
              <path d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.032C17.335,0,18,0.665,18,1.484L18,1.484z M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.032C17.335,6.031,18,6.696,18,7.516L18,7.516z M18,13.516C18,14.335,17.335,15,16.516,15H1.484 C0.665,15,0,14.335,0,13.516l0,0c0-0.82,0.665-1.483,1.484-1.483h15.032C17.335,12.031,18,12.695,18,13.516L18,13.516z"/>
            </svg>
          </span>
        </label>

        <div class="trigger"><a class="page-link" href="/blog/about/">About</a><a class="page-link" href="/blog/projects/">Projects</a><a class="page-link" href="/blog/search/">Search</a><a class="page-link" href="/blog/categories/">Tags</a></div>
      </nav></div>
</header>
<main class="page-content" aria-label="Content">
      <div class="wrapper">
        <article class="post h-entry" itemscope itemtype="http://schema.org/BlogPosting">

  <header class="post-header">
    <h1 class="post-title p-name" itemprop="name headline">A quick note on regular expressions</h1><p class="page-description">Why regular expressions are awesome and you should learn them.</p><p class="post-meta post-meta-title"><time class="dt-published" datetime="2020-06-01T00:00:00-05:00" itemprop="datePublished">
        Jun 1, 2020
      </time>
       • <span class="read-time" title="Estimated read time">
    
    
      3 min read
    
</span></p>

    
      <p class="category-tags"><i class="fas fa-tags category-tags-icon"></i></i> 
      
        <a class="category-tags-link" href="/blog/categories/#Misc">Misc</a>
        
      
      </p>
    

    
      
        <div class="pb-5 d-flex flex-wrap flex-justify-end">
          <div class="px-2">

    <a href="https://github.com/joedockrill/blog/tree/master/_notebooks/2020-06-01-A-quick-note-on-regular-expressions.ipynb" role="button" target="_blank">
<img class="notebook-badge-image" src="/blog/assets/badges/github.svg" alt="View On GitHub">
    </a>
</div>

          
          <div class="px-2">
    <a href="https://colab.research.google.com/github/joedockrill/blog/blob/master/_notebooks/2020-06-01-A-quick-note-on-regular-expressions.ipynb" target="_blank">
        <img class="notebook-badge-image" src="/blog/assets/badges/colab.svg" alt="Open In Colab"/>
    </a>
</div>
        </div>
      </header>

  <div class="post-content e-content" itemprop="articleBody">
    <ul class="section-nav">
</ul><!--
#################################################
### THIS FILE WAS AUTOGENERATED! DO NOT EDIT! ###
#################################################
# file to edit: _notebooks/2020-06-01-A-quick-note-on-regular-expressions.ipynb
-->

<div class="container" id="notebook-container">
        
    
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    

<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>In the last post I included a code snippet which uses a regular expression to extract the title from a name in the titanic data.</p>
<p>It just occurred to me that a lot of the people reading the blogs of beginner data scientists, if they aren’t hiring managers (Hi, I love you!), are probably also beginner data scientists, and in a lot of cases, probably quite new to programming. Regular expression patterns (sometimes known as regex) are something you should know about.</p>
<p>Regular expressions can do quite complicated text pattern matching which would often take some quite cumbersome code otherwise. They take a bit of learning and getting used to but I’ll give you the briefest introduction so you can at least understand why it’s worth the effort to learn.</p>
<p>If you’ve already written something similar using string indexing functions, you’re not going to take long to convince.</p>
<p>The names in the titanic data look like these:</p>
<table>
<thead>
<tr>
<th>Name</th>
</tr>
</thead>
<tbody>
<tr>
<td>Braund, Mr. Owen Harris</td>
</tr>
<tr>
<td>Cumings, Mrs. John Bradley (Florence Briggs Th…</td>
</tr>
<tr>
<td>Heikkinen, Miss. Laina</td>
</tr>
<tr>
<td>Futrelle, Mrs. Jacques Heath (Lily May Peel)</td>
</tr>
<tr>
<td>Allen, Mr. William Henry</td>
</tr>
</tbody>
</table>
<p>The regular expression I started using to process them was this: <code>[^,]*,\s([^.]*)</code> which breaks down into 3 sections, explained with the example <code>“Braund, Mr. Owen Harris”</code>.</p>
<table>
<thead>
<tr>
<th>RegEx</th>
<th>Matches Text</th>
</tr>
</thead>
<tbody>
<tr>
<td>[^,]*</td>
<td>Anything except a comma, multiple times “Braund”</td>
</tr>
<tr>
<td>,\s</td>
<td>A comma followed by a space   “, “</td>
</tr>
<tr>
<td>([^.]*)</td>
<td>Anything except a period, multiple times  “Mr”</td>
</tr>
</tbody>
</table>
<p>The brackets around the third part mean that it is a match group, which we can use to extract the actual value in our code. If I’d wanted to know the surname as well (maybe to turn the name into <code>“Mr Braund”</code>) I could have placed brackets around the first part and the third part of the pattern and extracted them both.</p>
<p>This pattern needed a slight tweak as it failed on one name in the training data. <code>“Rothes, the Countess. of (Lucy Noel Martha Dye…”</code>. This was returning <code>“the Countess”</code> in the match group instead of <code>“Countess”</code>.</p>
<p>The new pattern is <code>[^,]*,\s(the\s)?([^.]*)</code>. A question mark in a regex means zero or one times and the match object returns None when the pattern doesn’t find the optional “the ” in the name. I ignore it anyway and return the second match group which contains the title I’m after.</p>

</div>
</div>
</div>
    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="kn">import</span> <span class="nn">re</span>
 
<span class="k">def</span> <span class="nf">ExtractTitle</span><span class="p">(</span><span class="n">name</span><span class="p">):</span>
  <span class="n">ptn</span> <span class="o">=</span> <span class="s2">"[^,]*,\s(the\s)?([^\.]*)"</span>   
  <span class="n">p</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="n">ptn</span><span class="p">,</span> <span class="n">re</span><span class="o">.</span><span class="n">IGNORECASE</span><span class="p">)</span>
  <span class="n">m</span> <span class="o">=</span> <span class="n">p</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="n">name</span><span class="p">)</span>

  <span class="k">if</span> <span class="n">m</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
    <span class="k">return</span> <span class="n">m</span><span class="o">.</span><span class="n">group</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
  <span class="k">else</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">"FAILED EXTRACTING TITLE FROM: "</span> <span class="o">+</span> <span class="n">name</span><span class="p">)</span>
    <span class="k">return</span> <span class="kc">None</span>
</pre></div>

    </div>
</div>
</div>

</div>
    

<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>You should at least now understand how powerful regex patterns can be, and this is probably one of the simplest examples you’re likely to find. If you think about something even a tiny bit more complicated like an email address and the many different ways they can appear, if you try extracting them from larger blocks of text using string indexing functions, you’re going to have a migraine quite quickly.</p>
<p>Luckily, regular expressions have been around since 1951 and appear in some form in most programming languages, even if you have to download a third-party library. Python has a built-in package for them so you just need to import re.</p>
<p>Lastly the web is full of websites which teach you regular expressions and help you build them. <a href="http://regexr.com">RegExr</a> has a great visual editor which lets you edit the pattern with test text underneath so you can see in real time what your changes are doing. There are plenty more like this. Go and play…</p>

</div>
</div>
</div>
</div>



  </div><!-- from https://github.com/utterance/utterances -->
<script src="https://utteranc.es/client.js"
        repo="joedockrill/blog"
        issue-term="title"
        label="blogpost-comment"
        theme="github-light"
        crossorigin="anonymous"
        async>
</script><a class="u-url" href="/blog/2020/06/01/a-quick-note-on-regular-expressions/" hidden></a>
</article>
      </div>
    </main><footer class="site-footer h-card">
  <data class="u-url" href="/blog/"></data>

  <div class="wrapper">

    <div class="footer-col-wrapper">
      <div class="footer-col">
        <p class="feed-subscribe">
          <a href="/blog/feed.xml">
            <svg class="svg-icon orange">
              <use xlink:href="/blog/assets/minima-social-icons.svg#rss"></use>
            </svg><span>Subscribe</span>
          </a>
        </p>
        <ul class="contact-list">
          <li class="p-name">Joe Dockrill</li>
          <li><a class="u-email" href="mailto:joedockrill@gmail.com">joedockrill@gmail.com</a></li>
        </ul>
      <p>
          Built using 
        <a href="https://github.com/fastai/fastpages">
          <img src="/blog/images/favicon.ico">
          fastpages
        </a>
       </p>
      </div>
      <div class="footer-col" style="display:flex; justify-content:left;">
        <p>
          <a href="https://www.buymeacoffee.com/joedockrill" target="_blank"><img src="https://cdn.buymeacoffee.com/buttons/default-blue.png" alt="Buy Me A Coffee" width="200px"></a>
        </p>
        <p><ul class="social-media-list"><li><a rel="me" href="https://github.com/joedockrill" title="joedockrill"><svg class="svg-icon grey"><use xlink:href="/blog/assets/minima-social-icons.svg#github"></use></svg></a></li><li><a rel="me" href="https://www.linkedin.com/in/joe-dockrill" title="joe-dockrill"><svg class="svg-icon grey"><use xlink:href="/blog/assets/minima-social-icons.svg#linkedin"></use></svg></a></li></ul>
</p>
      </div>
    </div>
  </div>

</footer>
</body>

</html>
